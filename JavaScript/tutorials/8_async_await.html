<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title></title>
</head>
<body>

	<h1>Async Await</h1>

	
	
	<script>
		console.log('Start');

		const delay = ms => {
			return new Promise(r => setTimeout(() => r(), ms));
		}

		delay(2000).then(() => console.log('2 sec dealy'));


		const url = 'https://jsonplaceholder.typicode.com/todos';

		/*
		// first way without async await
		function fetchTodos () {
			console.log('fetch to do started ...');
			return delay(2000)
			.then(() => fetch(url)) // for browser 				
			.then(response => response.json());
		}

		fetchTodos()
			.then(data => {
				console.log('Data: ', data);
			})
			.catch(e => console.log(e));
		*/

		// with async await (better way)
		async function fetchAsyncTodos () {
			console.log('fetch to do started ...');
			try {
				await delay(2000);
				const response = await fetch(url);
				const data = await response.json();
				console.log('Data: ', data);
			} catch (e) {
				console.error(e);
			} finally {
				
			}

		}

		fetchAsyncTodos();

	</script>
	
</body>
</html>


